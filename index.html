<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Let’s Float Thru Space</title>

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: #000;
    }
    .hud {
      position: fixed;
      left: 12px;
      right: 12px;
      bottom: 12px;
      z-index: 10;
      color: #fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }
    .btn {
      background: rgba(255,255,255,.12);
      border: 1px solid rgba(255,255,255,.25);
      padding: 10px 14px;
      border-radius: 12px;
      color: #fff;
      cursor: pointer;
    }
    .note {
      font-size: 13px;
      opacity: .85;
    }
  </style>

  <script>
    /* ===== STARFIELD ===== */
    AFRAME.registerComponent('starfield', {
      schema: { count:{default:12000}, radius:{default:260} },
      init() {
        const g = new THREE.BufferGeometry();
        const p = new Float32Array(this.data.count * 3);
        for (let i=0;i<p.length;i+=3){
          const r = this.data.radius * (0.9 + Math.random()*0.1);
          const t = Math.random() * Math.PI * 2;
          const u = Math.acos(2*Math.random()-1);
          p[i]   = r * Math.sin(u) * Math.cos(t);
          p[i+1] = r * Math.cos(u);
          p[i+2] = r * Math.sin(u) * Math.sin(t);
        }
        g.setAttribute('position', new THREE.BufferAttribute(p,3));
        const m = new THREE.PointsMaterial({ color: 0xffffff, size: 0.55 });
        this.el.setObject3D('mesh', new THREE.Points(g,m));
      }
    });

    /* ===== FLOAT FORWARD ===== */
    AFRAME.registerComponent('float-forward', {
      schema:{ speed:{default:0.5}, sway:{default:0.12}, bob:{default:0.05} },
      init(){ this.start = null; this.base = this.el.object3D.position.clone(); },
      tick(t){
        if(!this.start) this.start = t;
        const tt = (t - this.start) / 1000;
        const o = this.el.object3D;
        o.position.z = this.base.z - tt * this.data.speed;
        o.position.x = Math.sin(tt*0.35) * this.data.sway;
        o.position.y = this.base.y + Math.sin(tt*0.25) * this.data.bob;
      }
    });

    /* ===== DRIFT OBJECTS PAST YOU ===== */
    AFRAME.registerComponent('drift-past', {
      schema:{ speed:{default:0.2}, resetZ:{default:-700}, spawnZ:{default:120} },
      tick(_,dt){
        const p = this.el.object3D.position;
        p.z += (dt/1000) * this.data.speed * 40;
        if (p.z > this.data.spawnZ) p.z = this.data.resetZ;
      }
    });

    /* ===== SLOW PLANET SPIN ===== */
    AFRAME.registerComponent('slow-spin', {
      schema:{ speed:{default:0.01} },
      tick(_,dt){ this.el.object3D.rotation.y += (dt/1000)*this.data.speed; }
    });
  </script>
</head>

<body>
  <div class="hud">
    <span class="note">Deep space float • Enter VR</span>
  </div>

  <a-scene background="color:#000010" vr-mode-ui="enabled:true">

    <!-- LOAD YOUR NEBULAS (ROOT FILES, EXACT NAMES) -->
    <a-assets>
      <img id="neb1"
        src="space-background-realistic-starry-night-cosmos-shining-stars-milky-way-stardust-color-galaxy.jpg">
      <img id="neb2"
        src="space-background-realistic-starry-night-cosmos-shining-stars-milky-way-stardust-color-galaxy%20(1).jpg">
    </a-assets>

    <!-- STARS -->
    <a-entity starfield></a-entity>

    <!-- CAMERA FLOAT -->
    <a-entity position="0 1.6 0" float-forward>
      <a-camera></a-camera>
    </a-entity>

    <!-- NEBULA CLOUDS -->
    <a-plane width="180" height="100"
      position="-60 20 -600"
      rotation="0 25 0"
      material="src:#neb1; transparent:true; opacity:0.55; side:double"
      drift-past></a-plane>

    <a-plane width="170" height="95"
      position="70 -10 -650"
      rotation="0 -30 0"
      material="src:#neb2; transparent:true; opacity:0.5; side:double"
      drift-past="speed:0.18"></a-plane>

    <!-- BIG PLANETS (using nebula textures) -->
    <a-sphere radius="8"
      position="-30 6 -720"
      material="src:#neb1; roughness:1"
      slow-spin
      drift-past="speed:0.12"></a-sphere>

    <a-sphere radius="6"
      position="28 -4 -680"
      material="src:#neb2; roughness:1"
      slow-spin="speed:0.015"
      drift-past="speed:0.14"></a-sphere>

    <!-- GIANT DISTANT PLANET -->
    <a-sphere radius="14"
      position="0 18 -1000"
      material="src:#neb2; roughness:1"
      slow-spin="speed:0.004"
      drift-past="speed:0.08; resetZ:-1200"></a-sphere>

  </a-scene>
</body>
</html>

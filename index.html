<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Cosmic Drift VR</title>

  <!-- ONLY A-Frame. Nothing else. Keeps Quest happy. -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    html, body { margin:0; height:100%; background:#000; overflow:hidden; }
    .hud{
      position:fixed; left:14px; bottom:14px; z-index:10;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size:14px; line-height:1.25;
      color:rgba(255,255,255,.85);
      text-shadow:0 2px 10px rgba(0,0,0,.8);
      pointer-events:none;
      user-select:none;
    }
  </style>

  <script>
    // Quest-safe auto background swap:
    // - ONE sky only
    // - NO opacity fades
    // - NO second sky
    AFRAME.registerComponent('auto-sky-swap', {
      schema: {
        intervalMs: { type: 'int', default: 90000 } // 90 seconds
      },
      init: function () {
        const sky = document.querySelector('#sky');
        if (!sky) return;

        const skies = ['#bgA', '#bgB'];
        let i = 0;

        // Start on bgA
        sky.setAttribute('src', skies[i]);

        // Swap on timer
        this._timer = setInterval(() => {
          i = (i + 1) % skies.length;
          sky.setAttribute('src', skies[i]);
        }, this.data.intervalMs);
      },
      remove: function () {
        if (this._timer) clearInterval(this._timer);
      }
    });
  </script>
</head>

<body>
  <div class="hud">Auto background swap • 45s sky drift • planets spaced • (Quest-safe)</div>

  <a-scene vr-mode-ui="enabled: true" background="color:#000">
    <a-assets timeout="15000">
      <!-- Backgrounds -->
      <img id="bgA" src="space-background-realistic-starry-night-cosmos-shining-stars-milky-way-stardust-color-galaxy.jpg">
      <img id="bgB" src="space-background-realistic-starry-night-cosmos-shining-stars-milky-way-stardust-color-galaxy (1).jpg">

      <!-- Planet textures -->
      <img id="earthTex"   src="earth_tex.jpg">
      <img id="jupiterTex" src="jupiter_tex.jpg">
      <img id="saturnTex"  src="saturn_tex.jpg">
      <img id="uranusTex"  src="uranus_tex.jpg">
      <img id="moonTex"    src="moon_tex.jpg">
    </a-assets>

    <!-- Simple camera rig (reliable VR) -->
    <a-entity id="rig" position="0 1.6 0">
      <a-camera wasd-controls-enabled="false"></a-camera>
    </a-entity>

    <!-- Light -->
    <a-entity light="type: ambient; intensity: 0.70"></a-entity>
    <a-entity light="type: directional; intensity: 0.55" position="2 3 1"></a-entity>

    <!-- ONE SKY ONLY (Quest-safe) -->
    <a-sky
      id="sky"
      auto-sky-swap="intervalMs: 90000"
      src="#bgA"
      rotation="0 0 0"
      material="shader: flat"
      animation="property: rotation; to: 0 360 0; dur: 45000; easing: linear; loop: true"
    ></a-sky>

    <!-- PLANETS: spread around you (no clumping) -->
    <!-- Spin speed: 20 seconds per full rotation (as requested) -->

    <!-- Earth (front) -->
    <a-sphere radius="1.15" position="0 2 -14"
      material="src:#earthTex; roughness:1; metalness:0"
      animation="property: rotation; to: 0 360 0; dur: 20000; easing: linear; loop: true"></a-sphere>

    <!-- Jupiter (right) -->
    <a-sphere radius="1.85" position="14 2 0"
      material="src:#jupiterTex; roughness:1; metalness:0"
      animation="property: rotation; to: 0 360 0; dur: 20000; easing: linear; loop: true"></a-sphere>

    <!-- Uranus (left) -->
    <a-sphere radius="1.35" position="-14 2 0"
      material="src:#uranusTex; roughness:1; metalness:0"
      animation="property: rotation; to: 0 360 0; dur: 20000; easing: linear; loop: true"></a-sphere>

    <!-- Saturn (behind) -->
    <a-entity position="0 2 16">
      <a-sphere radius="1.55"
        material="src:#saturnTex; roughness:1; metalness:0"
        animation="property: rotation; to: 0 360 0; dur: 20000; easing: linear; loop: true"></a-sphere>

      <a-ring radius-inner="2.05" radius-outer="2.75" rotation="75 15 0"
        material="color:#c9c0b2; opacity:0.35; transparent:true; side:double"></a-ring>
    </a-entity>

    <!-- Moon (up/front-right) -->
    <a-sphere radius="0.65" position="6 6 -8"
      material="src:#moonTex; roughness:1; metalness:0"
      animation="property: rotation; to: 0 360 0; dur: 20000; easing: linear; loop: true"></a-sphere>

  </a-scene>
</body>
</html>
